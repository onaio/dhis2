<script>	jQuery(document).ready(function(){		datePickerInRange( 'startdate' , 'enddate' );			tableSorter( 'listTable' );				validation( 'periodColumnForm', function( form ){ 			form.action = getFieldValue('action');			form.submit();		});				periodColumnDialog = setUpDialog( 'periodColumn', i18n_expression, 410, 210 );	});		var i18n_startdate_null = "$encoder.jsEscape($i18n.getString( 'startdate_null' ) , "'")";	var i18n_enddate_null = "$encoder.jsEscape($i18n.getString( 'enddate_null' ) , "'")";	var i18n_column_is_null = "$encoder.jsEscape($i18n.getString( 'column_is_null' ) , "'")";	var i18n_confirm_delete = '$encoder.jsEscape($i18n.getString( 'confirm_delete' ) , "'")';	var i18n_expression = '$encoder.jsEscape( $i18n.getString( "expression" ) , "'")';	var periodColumnDialog = null;</script><h3>$!encoder.htmlEncode( $!report.displayName )</h3><table width="100%"><tr style="vertical-align:bottom;"><td>	$i18n.getString( "filter_by_name" ): <input type="text" onkeyup="filterValues(this.value, 1)" style="width:300px"/>	</td><td align="right">			<input type="button" onclick="openAddPeriodColumn()" value="$i18n.getString('add')" style="width:150px"/><br>	<input type="button" onclick="window.location='listAllExportReport.action'" value="$i18n.getString('cancel')" style="width:150px"/><br>	</td></tr></table><table width="100%" id="listTable" class="listTable">	<thead>		<tr>					<th>$i18n.getString('start_date')</th>				<th>$i18n.getString('end_date')</th>				<th>$i18n.getString('period_type')</th>					<th>$i18n.getString('column')</th>			<th width="70px" class="{sorter: false}">$i18n.getString('operations')</th>				</tr>	</thead>	<tbody id="list">	#set( $mark = false )	#foreach($periodColumn in $report.periodColumns)		<tr #alternate( $mark )>			<td>$format.formatDate($periodColumn.startdate)</td>				<td>$format.formatDate($periodColumn.enddate)</td>						<td>$i18n.getString( $periodColumn.periodType )</td>						<td>$periodColumn.column</td>			<td align="center">								<a href="javascript:deletePeriodColumn($report.id, $periodColumn.id );" title="$i18n.getString( 'remove' )"><img src="../images/delete.png" alt="$i18n.getString( 'remove' )"></a>				<a href="javascript:openUpdatePeriodColumn( $periodColumn.id );" title="$i18n.getString( 'edit' )"><img src="../images/edit.png" alt="$i18n.getString( 'edit' )"></a>			</td>		</tr>		#if( $mark )			#set( $mark = false )		#else			#set( $mark = true )		#end	#end	</tbody></table><div id="periodColumn" style="padding:10px">	<form id="periodColumnForm" method="POST"><input type="hidden" id="action" value=""/><input type="hidden" name="id" id="id"/><input type="hidden" value="$!report.id" name="exportReportId"/>	<table width="100%">		<tr>			<td><label>$i18n.getString('period_type')<em title="$i18n.getString( 'required' )" class="required">*</em></label></td>			<td>				<select type="text" id="periodType" name="periodType" style="min-width:20em">					<option value='selected_month'>$i18n.getString('selected_month')</option>					<option value='last_3_month'>$i18n.getString('last_3_month')</option>					<option value='last_6_month'>$i18n.getString('last_6_month')</option>					<option value='so_far_this_year'>$i18n.getString('so_far_this_year')</option>					<option value='quaterly'>$i18n.getString('quaterly')</option>					<option value='6_month'>$i18n.getString('six_monthly')</option>					<option value='yealy'>$i18n.getString('yearly')</option>				</select>			</td>					</tr>		<tr>			<td>$i18n.getString('start_date')</td>			<td>				<input id="startdate" name="startdate" type="text" readonly="readonly" /><em title="$i18n.getString( 'required' )" class="required">*</em>							</td>						</tr>		<tr>			<td>$i18n.getString('end_date')</td>			<td>				<input id="enddate" name="enddate" type="text" readonly="readonly"/><em title="$i18n.getString( 'required' )" class="required">*</em>							</td>						</tr>		<tr>			<td>$i18n.getString('column')</td>			<td>				<input id="column" name="column" type="text" class="{validate:{required:true, number:true}}"/><em title="$i18n.getString( 'required' )" class="required">*</em>						</td>						</tr>		<tr style="height:50px">			<td></td>			<td>				<input type="submit" id="action" value="$i18n.getString('save')" style="width:100px"/>				<input type="button" value="$i18n.getString('cancel')" style="width:100px" onclick="closeDialog( periodColumnDialog )"/>			</td>		</tr>			</table></form></div><script>		// ---------------------------------------------------------------------------	// Dialog	// ---------------------------------------------------------------------------	function setUpDialog( elementId, title, width, height )	{		var dialog = jQuery( '#'+elementId ).dialog({			title: title,			modal: true,			autoOpen: false,			minWidth: width,			minHeight: height,			width: width,			height: height		});				return dialog;	}	function openDialog( _dialog )	{		_dialog.dialog( 'open' );	}	function closeDialog( _dialog )	{		_dialog.dialog( 'close' );	}		function openAddPeriodColumn()	{		setFieldValue( "action", "savePeriodColumn.action" );		openDialog( periodColumnDialog );	}			function openUpdatePeriodColumn( id )	{		jQuery.postJSON( "getPeriodColumn.action", { id: id }, function( json )		{				byId("startdate").value = json.startdate;			byId("enddate").value = json.enddate;			byId("periodType").value = json.periodType;			byId("column").value = json.column;			byId("id").value = json.id;			setFieldValue( 'action', 'updatePeriodColumn.action' );						openDialog( periodColumnDialog );		} );	}	function deletePeriodColumn( exportReportId, periodColumnId )	{		if ( window.confirm( i18n_confirm_delete ) )		{			window.location="deletePeriodColumn.action?exportReportId=" + exportReportId + "&id=" + periodColumnId;		}		}</script>